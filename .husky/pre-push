#!/usr/bin/env sh

echo "ğŸ“¦ Running pre-push checks..."

echo "ğŸ” Checking dependencies..."
pnpm install --frozen-lockfile --prefer-offline > /dev/null 2>&1 || {
  echo "âš ï¸  Dependencies out of sync. Running pnpm install..."
  pnpm install || {
    echo "âŒ Failed to install dependencies"
    exit 1
  }
}

echo "ğŸ” Running linter..."
pnpm lint || {
  echo "âŒ Lint failed. Please fix linting errors before pushing."
  exit 1
}

echo "âœ… Lint passed"

echo "ğŸ§ª Running tests..."
pnpm test:ci || {
  echo "âŒ Tests failed. Please fix failing tests before pushing."
  exit 1
}

echo "âœ… Tests passed"

echo "âœ… All checks passed. Proceeding with push..."

